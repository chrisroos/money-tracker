%h1
  Transactions matching
  = "'#{params[:q]}'"
  
%p
  = link_to 'Edit', search_transactions_path(:q => params[:q], :edit => true)

%table#transactions
  = render :partial => 'table_header'
  = render :partial => 'table_footer'
  %tbody
    - @transactions.each_with_index do |transaction, index|
      = content_tag_for(:tr, transaction) do
        %td
          - klass = 'firstOfDay' if index == 0 || transaction.date != @transactions[index-1].date
          %span.date{:class => klass}= transaction.date.to_s(:human_friendly)
        %td.detail
          %p.description_and_category
            %span.description= transaction_description(transaction)
            %span.category= link_to transaction.category, search_transactions_path(:q => ['category', transaction.category].join(':')) if transaction.category
          %p.note= preserve transaction.note
        %td.paid_in= transaction_amount_in(transaction)
        %td.paid_out= transaction_amount_out(transaction)
        %td.actions= link_to 'Edit', edit_transaction_path(transaction)