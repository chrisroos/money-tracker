%p
  = link_to 'Edit', transactions_path(:period => params[:period], :edit => true)
  = link_to_previous_period params[:period]
  = link_to_next_period params[:period]
  
= render :partial => 'search_form'

%h1
  Transactions for
  = Date.from_period(params[:period]).to_s(:month_and_year)

%table#transactions
  = render :partial => 'table_header'
  = render :partial => 'table_footer'
  %tbody
    - @transactions.each do |transaction|
      = content_tag_for(:tr, transaction) do
        %td.date= transaction.date.to_s(:weekday_and_day)
        %td.detail
          %p.description_and_category
            %span.description= transaction_description(transaction)
            %span.category= link_to transaction.category, search_transactions_path(:q => ['category', transaction.category].join(':')) if transaction.category
          %p.note= preserve transaction.note
        %td.paid_in= transaction_amount_in(transaction)
        %td.paid_out= transaction_amount_out(transaction)
        %td.actions= link_to 'Edit', edit_transaction_path(transaction)