- if params[:period]
  %p
    = link_to_previous_period params[:period]
    = link_to_next_period params[:period]
  
= render :partial => 'search_form'

%h1
  - if params[:q]
    Transactions matching
    = "'#{params[:q]}'"
  - else 
    Transactions for
    = Date.from_period(params[:period]).to_s(:month_and_year)

%table#transactions
  = render :partial => 'table_header'
  = render :partial => 'table_footer'
  %tbody
    - @transactions.each do |transaction|
      = content_tag_for(:tr, transaction) do
        %td.date
          = form_for(transaction, :html => {:id => nil}) do |transaction_form|
            = transaction_form.text_field :date, :size => '10', :id => nil, :value => transaction.date
            = transaction_form.submit 'Save date', :id => nil
        %td.description
          = form_for(transaction, :html => {:id => nil}) do |transaction_form|
            = transaction_form.text_field :description, :size => '80', :id => nil, :value => transaction.description
            = transaction_form.submit 'Save description', :id => nil
        %td.paid_in= transaction_amount_in(transaction)
        %td.paid_out= transaction_amount_out(transaction)
        %td.note
          = form_for(transaction, :html => {:id => nil}) do |transaction_form|
            = transaction_form.text_area :note, :size => '40x3', :id => nil
            = transaction_form.submit 'Save note', :id => nil
        %td.category
          = form_for(transaction, :html => {:id => nil}) do |transaction_form|
            = transaction_form.text_field :category, :size => 40, :id => nil
            = transaction_form.submit 'Save category', :id => nil
        %td.actions